try{"undefined"===typeof WeakMap&&function(){var l=Object.defineProperty,w=Date.now()%1E9,x=function(){this.name="__st"+(1E9*Math.random()>>>0)+(w++ +"__")};x.prototype={set:function(u,a){var h=u[this.name];h&&h[0]===u?h[1]=a:l(u,this.name,{value:[u,a],writable:!0})},get:function(l){var a;return(a=l[this.name])&&a[0]===l?a[1]:void 0}};window.WeakMap=x}()}catch(e$$12){};try{(function(l){function w(){m=!1;var a=r;r=[];a.sort(function(a,c){return a.uid_-c.uid_});var c=!1;a.forEach(function(a){var b=a.takeRecords();x(a);b.length&&(a.callback_(b,a),c=!0)});c&&w()}function x(a){a.nodes_.forEach(function(b){(b=c.get(b))&&b.forEach(function(c){c.observer===a&&c.removeTransientObservers()})})}function u(a,b){for(var e=a;e;e=e.parentNode){var d=c.get(e);if(d)for(var k=0;k<d.length;k++){var g=d[k],m=g.options;(e===a||m.subtree)&&(m=b(m))&&g.enqueue(m)}}}function a(a){this.callback_=
a;this.nodes_=[];this.records_=[];this.uid_=++p}function h(a,c){this.type=a;this.target=c;this.addedNodes=[];this.removedNodes=[];this.oldValue=this.attributeNamespace=this.attributeName=this.nextSibling=this.previousSibling=null}function f(a,c){return q=new h(a,c)}function b(a){if(n)return n;var c=q,b=new h(c.type,c.target);b.addedNodes=c.addedNodes.slice();b.removedNodes=c.removedNodes.slice();b.previousSibling=c.previousSibling;b.nextSibling=c.nextSibling;b.attributeName=c.attributeName;b.attributeNamespace=
c.attributeNamespace;b.oldValue=c.oldValue;n=b;n.oldValue=a;return n}function d(a,c,b){this.observer=a;this.target=c;this.options=b;this.transientObservedNodes=[]}var c=new WeakMap,e=window.msSetImmediate;if(!e){var g=[],k=String(Math.random());window.addEventListener("message",function(a){a.data===k&&(a=g,g=[],a.forEach(function(a){a()}))});e=function(a){g.push(a);window.postMessage(k,"*")}}var m=!1,r=[],p=0;a.prototype={observe:function(a,b){a=window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(a)||
a;if(!b.childList&&!b.attributes&&!b.characterData||b.attributeOldValue&&!b.attributes||b.attributeFilter&&b.attributeFilter.length&&!b.attributes||b.characterDataOldValue&&!b.characterData)throw new SyntaxError;var e=c.get(a);e||c.set(a,e=[]);for(var k,g=0;g<e.length;g++)if(e[g].observer===this){k=e[g];k.removeListeners();k.options=b;break}k||(k=new d(this,a,b),e.push(k),this.nodes_.push(a));k.addListeners()},disconnect:function(){this.nodes_.forEach(function(a){a=c.get(a);for(var b=0;b<a.length;b++){var e=
a[b];if(e.observer===this){e.removeListeners();a.splice(b,1);break}}},this);this.records_=[]},takeRecords:function(){var a=this.records_;this.records_=[];return a}};var q,n;d.prototype={enqueue:function(a){var b=this.observer.records_,c=b.length;if(0<b.length){var d=b[c-1];d=d===a?d:!n||d!==n&&d!==q?null:n;if(d){b[c-1]=d;return}}else r.push(this.observer),m||(m=!0,e(w));b[c]=a},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(a){var b=this.options;b.attributes&&a.addEventListener("DOMAttrModified",
this,!0);b.characterData&&a.addEventListener("DOMCharacterDataModified",this,!0);b.childList&&a.addEventListener("DOMNodeInserted",this,!0);(b.childList||b.subtree)&&a.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(a){var b=this.options;b.attributes&&a.removeEventListener("DOMAttrModified",this,!0);b.characterData&&a.removeEventListener("DOMCharacterDataModified",this,!0);b.childList&&a.removeEventListener("DOMNodeInserted",
this,!0);(b.childList||b.subtree)&&a.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(a){if(a!==this.target){this.addListeners_(a);this.transientObservedNodes.push(a);var b=c.get(a);b||c.set(a,b=[]);b.push(this)}},removeTransientObservers:function(){var a=this.transientObservedNodes;this.transientObservedNodes=[];a.forEach(function(a){this.removeListeners_(a);a=c.get(a);for(var b=0;b<a.length;b++)if(a[b]===this){a.splice(b,1);break}},this)},handleEvent:function(a){switch(a.type){case "DOMAttrModified":var c=
a.attrName,e=a.relatedNode.namespaceURI,d=a.target,k=new f("attributes",d);k.attributeName=c;k.attributeNamespace=e;var g=a.attrChange===MutationEvent.ADDITION?null:a.prevValue;u(d,function(a){if(a.attributes&&(!a.attributeFilter||!a.attributeFilter.length||-1!==a.attributeFilter.indexOf(c)||-1!==a.attributeFilter.indexOf(e)))return a.attributeOldValue?b(g):k});break;case "DOMCharacterDataModified":d=a.target;k=f("characterData",d);g=a.prevValue;u(d,function(a){if(a.characterData)return a.characterDataOldValue?
b(g):k});break;case "DOMNodeRemoved":this.addTransientObserver(a.target);case "DOMNodeInserted":var d=a.relatedNode,m=a.target,p;"DOMNodeInserted"===a.type?(a=[m],p=[]):(a=[],p=[m]);var r=m.previousSibling,m=m.nextSibling,k=f("childList",d);k.addedNodes=a;k.removedNodes=p;k.previousSibling=r;k.nextSibling=m;u(d,function(a){if(a.childList)return k})}q=n=void 0}};l.JsMutationObserver=a;!l.MutationObserver&&l.WebKitMutationObserver&&(l.MutationObserver=l.WebKitMutationObserver);l.MutationObserver||(l.MutationObserver=
a)})(this)}catch(e$$15){};(function(){var l;(function(a){a._fs_debug=function(){return!!window._fs_ext_debug||!!window._fs_debug};a._fs_host=function(){return window._fs_ext_host||window._fs_host};a._fs_org=function(){return window._fs_ext_org||window._fs_org};a._fs_csp=function(){return window._fs_csp};a._fs_ready=function(){return window._fs_ready};a._fs_run_in_iframe=function(){return!!window._fs_run_in_iframe};a._fs_is_outer_script=function(){return!!window._fs_is_outer_script};a._fs_replay_flags=function(){return window._fs_replay_flags};
a._fs_transport=function(){return window._fs_transport};a.set_fs_shutdown=function(a){window._fs_shutdown=a}})(l||(l={}));(function(a){function h(a,b){var e=0;try{c.stringify(a,function(a,c){if(e++>b)throw"break";return"object"!=typeof c?void 0:c})}catch(d){if("break"!=d)return!0}return!1}function f(a,d,g,p){if(1>d)return 0;var q;a&&a.constructor==Date?q=isNaN(a)?"Invalid Date":a.toUTCString():(q="object"===typeof Node?a instanceof Node:a&&"object"===typeof a&&0<a.nodeType&&"string"===typeof a.nodeName,
q=q?b(a):void 0===a?"undefined":"object"!=typeof a||null==a?a:void 0);if(void 0!==q){q=c.stringify(q);if(void 0===q)return 0;'"'==q[0]&&(q=e(q,d,'..."'));return q.length<=d?(p.tokens.push(q),q.length):0}if(p.catchCycles){p.opath.splice(g);q=p.opath.lastIndexOf(a);if(-1<q)return a='"'+e("<Cycle to ancestor #"+(g-q-1)+">",d-2)+'"',p.tokens.push(a),a.length;p.opath.push(a)}var n=d,h=function(a){return n>=a.length?(n-=a.length,p.tokens.push(a),!0):!1};q=function(a){","==p.tokens[p.tokens.length-1]?p.tokens[p.tokens.length-
1]=a:h(a)};if(2>n)return 0;if(a instanceof Array){h("[");for(var l=0;l<a.length&&0<n;l++){var s=f(a[l],n-1,g+1,p),n=n-s;if(0==s&&!h("null"))break;h(",")}q("]")}else{h("{");for(var y=Object.keys(a),l=0;l<y.length&&0<n;l++){var s=y[l],E=a[s];if(!h('"'+s+'":'))break;s=f(E,n-1,g+1,p);if(0==s){p.tokens.pop();break}n-=s;h(",")}q("}")}return Infinity==d?1:d-n}function b(a){if(a.tagName){var b=a.tagName.toLowerCase();return"<"+b+(a.attributes&&a.attributes.type?' type="'+a.attributes.type.value+'"':"")+(a.id?
' id="'+a.id+'"':"")+(a.className?' class="'+a.className+'"':"")+">...</"+b+">"}b="";a.data&&a.data.substring&&(b=" "+a.data.substring(0,50)+(50<a.data.length?"...":""));return a.nodeName+b}var d=!1,c;a.$entry=function(a){return a&&a.apply?function(){try{return a.apply(this,arguments)}catch(b){}}:a};a.initDebug=function(){d=a._fs_debug()};a.isDebug=function(){return d};a.logIfDebug=function(a){d&&window.console&&console.log(a)};a.logFSError=function(a){};a.stringify=function(a,b,e){void 0===b&&(b=
Infinity);void 0===e&&(e=!0);try{c||(c=window.JSON);var d={tokens:[],opath:[],catchCycles:e&&h(a,b/4)};f(a,b,0,d);return d.tokens.join("")}catch(g){a="Internal error: unable to determine what JSON error was";try{a=""+g,a=a.replace(/[^a-zA-Z0-9\.\:\!\, ]/g,"_")}catch(n){}return'"'+a+'"'}};var e=function(a,b,c){void 0===c&&(c="...");return a.length<=b?a:a.length<=c.length||b<=c.length?a.substring(0,b):a.substring(0,b-c.length)+c};a.baseUri=function(a){return"baseURI"in a?a.baseURI:(a=a.getElementsByTagName("base")[0])&&
a.href?a.href:location.href};a.doctypeString=function(a){a=a.doctype;if(!a)return null;var b;b="<!DOCTYPE "+a.name;a.publicId&&(b+=' PUBLIC "'+a.publicId+'"');a.systemId&&(b+=' "'+a.systemId+'"');return b+">"};a.parseJson=function(a){c||(c=window.JSON);return c.parse(a)};a.domainFromHost=function(a){var b=a.indexOf(":");0<=b&&(a=a.slice(0,b));return a};a.isLocalhost=function(a){return"localhost"==a||"127.0.0.1"==a};var g=function(){function a(){this._listeners=[];this._yesCapture=!0;this._noCapture=
!1;try{var b=Object.defineProperty({},"passive",{get:function(){this._yesCapture={capture:!0,passive:!0};this._noCapture={capture:!1,passive:!0}}});window.addEventListener("test",null,b)}catch(c){}}a.prototype.add=function(a,b,c,e){c={target:a,type:b,fn:function(a){e(a)},options:c?this._yesCapture:this._noCapture,index:this._listeners.length};this._listeners.push(c);a.addEventListener(b,c.fn,c.options);return c};a.prototype.remove=function(a){a.target.removeEventListener(a.type,a.fn,a.options);a.target=
null;a.fn=null};a.prototype.clear=function(){for(var a=0;a<this._listeners.length;a++)this._listeners[a].target&&this.remove(this._listeners[a]);this._listeners=[]};return a}();a.DomListeners=g})(l||(l={}));(function(a){a.EVENT_MUT_INSERT=2;a.EVENT_MUT_REMOVE=3;a.EVENT_MUT_ATTR=4;a.EVENT_MUT_ATTR_CURVE=5;a.EVENT_MUT_TEXT=6;a.EVENT_MUT_SKIPIDS=7;a.EVENT_MOUSEMOVE=8;a.EVENT_MOUSEMOVE_CURVE=9;a.EVENT_SCROLL=10;a.EVENT_SCROLL_CURVE=11;a.EVENT_MOUSEDOWN=12;a.EVENT_MOUSEUP=13;a.EVENT_KEYDOWN=14;a.EVENT_KEYUP=
15;a.EVENT_CLICK=16;a.EVENT_FOCUS=17;a.EVENT_VALUECHANGE=18;a.EVENT_RESIZE=19;a.EVENT_DOMLOADED=20;a.EVENT_LOAD=21;a.EVENT_PLACEHOLDER_SIZE=22;a.EVENT_UNLOAD=23;a.EVENT_BLUR=24;a.EVENT_SET_FRAME_BASE=25;a.EVENT_TOUCHSTART=32;a.EVENT_TOUCHEND=33;a.EVENT_TOUCHCANCEL=34;a.EVENT_TOUCHMOVE=35;a.EVENT_TOUCHMOVE_CURVE=36;a.EVENT_NAVIGATE=37;a.EVENT_PLAY=38;a.EVENT_PAUSE=39;a.EVENT_INNERWIDTH=40;a.EVENT_INNERWIDTH_CURVE=41;a.EVENT_LOG=48;a.EVENT_ERROR=49;a.EVENT_DBL_CLICK=50;a.EVENT_FORM_SUBMIT=51;a.EVENT_WINDOW_FOCUS=
52;a.EVENT_WINDOW_BLUR=53;a.EVENT_HEARTBEAT=54;a.EVENT_SYS_SETMETA=8192;a.EVENT_SYS_SETVAR=8193;a.EVENT_SYS_HIGHLIGHT=8194;a.EVENT_COOKED_LOAD="load";a.EVENT_COOKED_UNLOAD="unload";a.EVENT_COOKED_NAVIGATE="navigate";a.EVENT_COOKED_CLICK="click";a.EVENT_COOKED_TAP="tap";a.EVENT_COOKED_FOCUS="focus";a.EVENT_COOKED_CHANGE="change";a.EVENT_COOKED_MOUSE_THRASH="thrash";a.isUserActionEvent=function(h){switch(h){case a.EVENT_MOUSEDOWN:case a.EVENT_MOUSEMOVE:case a.EVENT_MOUSEMOVE_CURVE:case a.EVENT_MOUSEUP:case a.EVENT_KEYDOWN:case a.EVENT_KEYUP:case a.EVENT_TOUCHSTART:case a.EVENT_TOUCHEND:case a.EVENT_TOUCHMOVE:case a.EVENT_TOUCHMOVE_CURVE:case a.EVENT_TOUCHCANCEL:case a.EVENT_CLICK:case a.EVENT_SCROLL:case a.EVENT_SCROLL_CURVE:case a.EVENT_NAVIGATE:return!0}return!1};
a.MAX_LOGS_PER_PAGE=1024})(l||(l={}));(function(a){function h(){return window[f]}var f="_fs_loaded",b;a.Namespace=function(){b||(b=h()?h():window._fs_namespace?window._fs_namespace:"FS");return b};a.isLoaded=h;a.setLoaded=function(a){window[f]=a;a in window||(window[a]={})}})(l||(l={}));var w;(function(a){var h=/(?:[^\\](?:\\\\)*)/.source;a.CSS_URL=RegExp('url\\(\\s*"(.*?'+h+")\"\\s*\\)|url\\(\\s*'(.*?"+h+")'\\s*\\)|url\\((.*?"+h+")\\)","g");a.QUOTES=/\"|'/g;a.HOVER=/\:hover/g;a.FOCUS=/\:focus/g;
a.MEDIA_QUERY=/(@media.*?{)/g;a.DOMAIN=/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9]\.[a-zA-Z]{2,}$/;a.DOMAIN_PART=/^[a-zA-Z0-9-:]{1,61}$/;a.IPv4_PART=/^[0-9]{1,3}$/;a.IPv6_PART=/^[0-9a-f]{0,4}$/;a.PLAYBACK_URL_PARAMS=/.*\?Base=(.*)&Url=(.*)/;a.EMAIL=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;a.IMAGE_FILENAME=/\.(jpe?g|png|svg|gif|bmp)$/;a.ATTR_SELECTOR=/\[.*\]/g})(w||(w={}));(function(a){var h=
function(){function a(b,c){this.parent=b;this.combinator=c;this.classes={};this.attrs={};this.attrMatch={}}a.prototype.cssEscapeIdent=function(a){var b=function(a){return-1!="[]:./\\()@#%^&*'\" ".indexOf(a)?"\\"+a:"\\"+a.charCodeAt(0).toString(16)+" "};return"-"==a?"\\-":"-"==a[0]?"-"+a.slice(1).replace(/([^0-9a-zA-Z-_])/g,b):a.replace(/[^0-9a-zA-Z-_]/g,b)};a.prototype.cssEscapeString=function(a){return'"'+a.replace(/[\x01-\x1f\"\\]/g,function(a){return'"'==a||"\\"==a?"\\"+a:"\\"+a.charCodeAt(0).toString(16)+
" "})+'"'};a.prototype.serialize=function(){var a=this.combinator?this.combinator:"";this.tag&&(a+="*"==this.tag?this.tag:this.cssEscapeIdent(this.tag));this.id&&(a+="#"+this.cssEscapeIdent(this.id));var b=Object.keys(this.classes);b.sort();for(var e=0;e<b.length;e++)a+="."+this.cssEscapeIdent(b[e]);for(var g in this.attrs)a=""==this.attrMatch[g]?a+("["+this.cssEscapeIdent(g)+"]"):a+("["+this.cssEscapeIdent(g)+this.attrMatch[g]+this.cssEscapeString(this.attrs[g])+"]");return a};return a}();a.SelectorRule=
h;var f=function(){function a(b){this.rules=b}a.parse=function(d,c){void 0===c&&(c=null);d=d.trim();var e=new h(null,null),g=0,k=!1,m=function(){throw"Invalid selector";},r=function(){s=d[++g];if("\n"==s||null==s)throw m();if(s.match(/[0-9a-fA-F]/)){var a="";do a+=s,s=d[++g];while(s&&s.match(/[0-9a-fA-F]/));s&&s.match(/[\s]/)&&g++;return String.fromCharCode(parseInt(a,16))}g++;return s},p=function(){for(var a=g,b="",c;null!=(c=d[g]);)if("\\"==c)b+=r();else if(c.match(/[a-zA-Z0-9_\-]/)||128<c.charCodeAt(0))b+=
c,g++;else break;if(a==g)throw m();return b},f=function(){for(;null!=d[g]&&d[g].match(/\s/);)g++},n=function(){k=!0;g++;var a=p().toLowerCase();try{var b;f();var n=d[g],h="=";if("*"==n||"|"==n||"^"==n||"$"==n||"~"==n)h=n+"=",g++;if(c&&!c[h])throw m();if("="!=d[g])throw m();g++;f();b=h}catch(l){if(c&&!c["[]"]||"Invalid selector"!=l)throw l;if("]"!=d[g])throw m();g++;e.attrs[a]=e.attrMatch[a]="";return}s=d[g];'"'==s||"'"==s?(n=s,g++):n="]";for(h="";(s=d[g])!=n;){if(null==s)throw m();if("\\"==s)h+=r();
else{if("]"==n&&('"'==s||"'"==s))throw m();h+=s;g++}}g++;"]"!=n&&"]"==d[g]&&g++;e.attrs[a]=h;e.attrMatch[a]=b},l=function(){if(!k)throw m();k=!1;f();var a=d[g];">"==a||"+"==a||"~"==a?(g++,f()):a=" ";e=new h(e,a);if(c&&!c[a])throw m();};if(0==d.indexOf("//"))throw m();for(var z=0,g=0;g<d.length;){if(z++>2*d.length)throw console.log("Likely caught in an infinite loop while parsing "+d),"Internal error, infinite loop";var s=d[g];switch(s){case "#":k=!0;g++;e.id=p();break;case "*":if(k)throw m();k=!0;
e.tag="*";if(c&&!c["*"])throw m();g++;break;case ".":k=!0;g++;e.classes[p()]=!0;break;case "[":n();break;case " ":case ">":case "+":case "~":l();break;case ":":throw m();default:if(k)throw m();k=!0;e.tag=p().toLowerCase()}}if(!k)throw m();return new a(e)};a.prototype.serialize=function(){for(var a=null,b=this.rules;b;b=b.parent)a=a?b.serialize()+a:b.serialize();return a};return a}();a.Selector=f})(l||(l={}));(function(a){function h(a){var b={};if(!a)return b;if(a.classList)for(var d=0;d<a.classList.length;++d)b[a.classList[d]]=
!0;else if(a.className)for(a=(null!=a.className.animVal?a.className.animVal:a.className).split(" "),d=0;d<a.length;++d)b[a[d].trim()]=!0;return b}a.NYI_KIND="nyi";a.BLOCKED_KIND="blocked";a.HIDE_KIND="hide";var f=function(){function a(b,c){this._parent=b;this._rule=c}a.prototype.parent=function(){return this._parent};a.prototype.matches=function(b,d){if(!b||this._rule.tag&&b.tagName.toLowerCase()!=this._rule.tag||this._rule.id&&b.id!=this._rule.id)return!1;for(var k in this._rule.classes)if(!(k in
d))return!1;for(var m in this._rule.attrs)if(k=b.getAttribute(m),null==k||!a.attrPredicates[this._rule.attrMatch[m]](k,this._rule.attrs[m]))return!1;return this._parent?this._parent.matches(b.parentElement,h(b.parentElement)):!0};a.attrPredicates={"":function(a,b){return!0},"=":function(a,b){return a==b},"*=":function(a,b){return-1<a.indexOf(b)},"^=":function(a,b){return 0==a.lastIndexOf(b,0)},"$=":function(a,b){return a.indexOf(b,a.length-b.length)+b.length==a.length},"~=":function(a,b){return-1<
a.split(/\s+/).indexOf(b)},"|=":function(a,b){return-1<a.split("-").indexOf(b)}};return a}();a.BlockRuleElem=f;var b=function(){function b(c){this.kind=c.Kind;this.selector=a.Selector.parse(c.Selector,{">":!0,"=":!0,"[]":!0,"*=":!0,"^=":!0,"$=":!0,"~=":!0,"|=":!0});var d=function(a){return new f(a.parent?d(a.parent):null,a)};this.rules=d(this.selector.rules)}b.isComment=function(a){return!!a.match(/^\s*\/\//)};b.prototype.serialize=function(){return this.selector.serialize()};return b}();a.BlockRule=
b;var d=function(){function a(){this._rules=[];this._predicateRules=[];this.rawRules=[]}a.prototype.isBlocked=function(a){for(var b=0;b<this._predicateRules.length;++b)if(this._predicateRules[b].Selector(a))return this._predicateRules[b].Kind;for(var c=h(a),b=0;b<this._rules.length;++b)if(this._rules[b].rules.matches(a,c))return this._rules[b].kind;return null};a.prototype.addRule=function(a){this._rules.push(new b(a));this.rawRules.push(a)};a.prototype.addPredicateRule=function(a){this._predicateRules.push(a)};
a.prototype.mungeBlockedStyle=function(a,b){var c=a.getBoundingClientRect(),d=Math.floor(c.width),c=Math.floor(c.height);if("object"==a.tagName.toLowerCase())for(var r=a.children,p=0;p<r.length;p++){var f=r[p];if("embed"==f.tagName.toLowerCase()){r=f.getBoundingClientRect();d=Math.max(d,Math.floor(r.width));c=Math.max(c,Math.floor(r.height));break}}r="";null!=b&&(r=b.trim());0<r.length&&";"!=r.charAt(r.length-1)&&(r+=";");if(0!=d||0!=c)r+="width:"+d+"px;height:"+c+"px;";return r};return a}();a.Blocker=
d})(l||(l={}));(function(a){var h=function(){function a(){this.dict={idx:-1,map:{}};this.nodeCount=1;this.startIdx=0}a.prototype.encode=function(b){function d(){e?1<m.length?g.push([e.idx,m.length]):g.push(e.idx):g.push(m[0])}if(0==b.length)return[];for(var c=b[0],e=Object.prototype.hasOwnProperty.call(this.dict.map,c)?this.dict.map[c]:null,g=[],k,m=[c],c=1;c<b.length;c++)if(k=b[c],e&&Object.prototype.hasOwnProperty.call(e.map,k))m.push(k),e=e.map[k];else{d();var r=this.startIdx+c-m.length;null==
e&&this.nodeCount<a.MAX_NODES&&(e={idx:r,map:{}},this.dict.map[m[m.length-1]]=e,this.nodeCount++);this.nodeCount<a.MAX_NODES&&(e.map[k]={idx:r,map:{}},this.nodeCount++);m=[k];e=Object.prototype.hasOwnProperty.call(this.dict.map,k)?this.dict.map[k]:null}d();this.startIdx+=b.length;return g};a.MAX_NODES=1E4;return a}();a.LZJGWEncoder=h;h=function(){function a(){this._seq=[]}a.prototype.sequence=function(){return this._seq};a.prototype.decode=function(a){for(var d=this._seq.length,c=0;c<a.length;++c){var e=
a[c];switch(typeof e){case "string":this._seq.push(e);break;case "number":this._seq.push(this._seq[e]);break;case "object":for(var g=0;g<e[1];g++)this._seq.push(this._seq[e[0]+g])}}return d};return a}();a.LZJGWDecoder=h})(l||(l={}));(function(a){a.MutationProcessingInterval=250;a.CurveSamplingInterval=142;a.UploadInterval=5E3;a.UserInactivityTimeout=1E4;a.HeartbeatInitial=4E3;a.HeartbeatMax=256E3;a.PageInactivityTimeout=18E5;a.BackoffMax=3E5;a.ScrollSampleInterval=a.MutationProcessingInterval/5;a.InactivityThreshold=
4E3})(l||(l={}));(function(a){a.UID_COOKIE="fs_uid";a.BAD_APP_IDS=" 0 1 -1 n/a nan undefined null nil the_id_that_you_use_in_your_app_for_this_user".split(" ");var h=function(){function f(a,d,c){void 0===c&&(c=document);this._host=a;this._orgId=d;this._doc=c;this._cookie=null;this._cookies={}}f.prototype.initFromCookies=function(b,d){for(var c=this._doc.cookie.split(";"),e=0;e<c.length;e++){var g=c[e].replace(/^\s+|\s+$/g,"").split("="),k=g[0];this._cookies[k]||(this._cookies[k]=g[1])}this._cookie=
f.parseCookie(this._cookies[a.UID_COOKIE]);if(this._cookie.Host!=b||this._cookie.OrgId!=d)this._cookie={Host:b,OrgId:d,UserId:"",SessionId:"",AppKey:"",Poisoned:!1}};f.prototype.initFromParsedCookie=function(a){this._cookie=a};f.parseCookie=function(b){var d="",c="",e="",g="",k="",m=!1;if(b){var r=b.split("`");3>r.length?d=b:(e=r[0],g=r[1],d=r[2],5<=r.length&&(k=decodeURIComponent(r[3]),m="true"==r[4],0<=a.BAD_APP_IDS.indexOf(k)&&(a.logIfDebug('ignoring invalid app key "'+k+'" from cookie.'),k="",
m=!1)))}b=d.indexOf(":");-1!=b&&(c=d.slice(b+1),d=d.slice(0,b));return{Host:e,OrgId:g,UserId:d,SessionId:c,AppKey:k,Poisoned:m}};f.prototype.host=function(){return this._cookie.Host};f.prototype.orgId=function(){return this._cookie.OrgId};f.prototype.userId=function(){return this._cookie.UserId};f.prototype.sessionId=function(){return this._cookie.SessionId};f.prototype.appKey=function(){return this._cookie.AppKey};f.prototype.poisoned=function(){return this._cookie.Poisoned};f.prototype.cookieData=
function(){return this._cookie};f.prototype.cookies=function(){return this._cookies};f.prototype.setCookie=function(a,d){var c=a+"="+d,c=this._domain?c+("; domain=."+encodeURIComponent(this._domain)):c+"; domain=";this._doc.cookie=c+"; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/"};f.prototype.setIds=function(b,d,c){a.isLocalhost(b)&&(b="");this._domain=b;this._cookie.UserId=d;this._cookie.SessionId=c;this.write()};f.prototype.setAppId=function(b){b&&(b=b.trim());if(!b)return this._cookie.Poisoned?
(a.logIfDebug("blocking FS.setUserVars API call due to mismatched user ID"),[!1,void 0]):[!0,void 0];if(b){var d=b.toLowerCase();if(0<=a.BAD_APP_IDS.indexOf(d))return a.logIfDebug("blocking FS.identify API call; uid value ("+b+") is illegal"),[!1,"fsidentity"]}if(this._cookie.AppKey&&this._cookie.AppKey!=b)return a.logIfDebug("blocking FS.identify API call; existing uid ("+this._cookie.AppKey+") does not match provided uid ("+b+")"),this._cookie.Poisoned=!0,this.write(),[!1,"newuid"];this._cookie.AppKey=
b;this._cookie.Poisoned=!1;this.write();return[!0,void 0]};f.prototype.encode=function(){var a=this._cookie.Host+"`"+this._cookie.OrgId+"`"+this._cookie.UserId+":"+this._cookie.SessionId;this._cookie.AppKey&&(a+="`"+encodeURIComponent(this._cookie.AppKey)+"`"+this._cookie.Poisoned);return a};f.prototype.write=function(){null!=this._domain&&this.setCookie(a.UID_COOKIE,this.encode())};return f}();a.Identity=h})(l||(l={}));(function(a){function h(b,c){return a.stringify({__fs:[b,c?c:""]})}function f(b){return a.isLocalhost(a.domainFromHost(b))?
b:0==b.indexOf("www.")?"r."+b.slice(4):"r."+b}function b(b,c){var d=Math.min(a.BackoffMax,5E3*Math.pow(2,b));return c?d+0.25*Math.random()*d:d}function d(a){return 400<=a||202==a?!0:!1}function c(a,b,c,d,e,g,k){a="/rec/bundle?OrgId="+a+"&UserId="+b+"&SessionId="+c+"&PageId="+d+"&Seq="+e.Seq;g&&(a+="&PageStartTime="+g);k&&(a+="&DeltaT="+k);return a}var e=function(){function b(a,c){void 0===c&&(c=new g);this._wnd=a;this._messagePoster=c}b.prototype.enqueueEvents=function(b){this._messagePoster.postMessage(this._wnd.parent,
a.FS_IFRAME_EVENTS,b)};b.prototype.startPipeline=function(a){};b.prototype.stopPipeline=function(){};b.prototype.flush=function(){};b.prototype.singSwanSong=function(){};return b}();a.PostMessageEventTransport=e;var g=function(){function b(){}b.prototype.postMessage=function(b,c,d){var e=a._fs_transport();e?e.send(c,a.stringify(d)):b.postMessage(h(c,d),"*")};return b}();a.PostMessagePoster=g;a.formatPostMessageData=h;a.bundleHost=f;e=function(){function b(c,d,e,g,m,h,l){void 0===h&&(h=a.RealTicker);
void 0===l&&(l=new k);this._ctx=c;this._protocol=e;this._identity=g;this._onShutdown=m;this._tickerFactory=h;this._poster=l;this._backoffTime=this._backoffRetries=this._byteCount=0;this._bundleSeq=1;this._lastPostTime=0;this._outgoingEventQueue=[];this._bundleQueue=[];this._bundleHost=f(d);this._lastBundleTime=c.wallTime();this._uploadTicker=new this._tickerFactory(a.UploadInterval);this._swanSong=new a.SwanSong(c,g,this,h)}b.prototype.protocol=function(){return this._protocol};b.prototype.enqueueEvents=
function(a){this._outgoingEventQueue=this._outgoingEventQueue.concat(a)};b.prototype.startPipeline=function(a){var b=this;this._pageId=a;this.enqueueAndSendBundle();this._uploadTicker.start(function(){b.enqueueAndSendBundle()})};b.prototype.stopPipeline=function(){this._uploadTicker.stop();this._outgoingEventQueue=[];this._bundleQueue=[]};b.prototype.flush=function(){this.maybeSendNextBundle()};b.prototype.singSwanSong=function(){0<this._outgoingEventQueue.length&&this.enqueueNextBundle();if(0<this._bundleQueue.length||
this._pendingBundle){var a=this._bundleQueue.concat();this._pendingBundle&&a.unshift(this._pendingBundle);this._swanSong.sing(this._pageId,a,this._lastBundleTime)}};b.prototype.sendSwanSongBundle=function(a,b,d,e,g,k,m,f,h){void 0===h&&(h=null);a=c(a,b,d,e,g,k,m);this.post(a,g,f,h)};b.prototype.enqueueAndSendBundle=function(){this._pendingBundle?this._pendingBundleFailed&&this._sendPendingBundle():0==this._outgoingEventQueue.length?this.maybeSendNextBundle():this.enqueueNextBundle()};b.prototype.enqueueNextBundle=
function(){var a={When:this._outgoingEventQueue[0].When,Seq:this._bundleSeq++,Evts:this._outgoingEventQueue};this._outgoingEventQueue=[];this._bundleQueue.push(a);this.maybeSendNextBundle()};b.prototype.maybeSendNextBundle=function(){this._pageId&&(!this._pendingBundle&&0!=this._bundleQueue.length)&&(this._pendingBundle=this._bundleQueue.shift(),this._sendPendingBundle())};b.prototype._sendPendingBundle=function(){var b=this,c=this._ctx.wallTime();if(!(c<this._backoffTime)){var e=this._pendingBundle;
this._pendingBundleFailed=!1;this._lastPostTime=this._lastBundleTime=c;this.sendBundle(e,function(c){a.logIfDebug("Sent bundle "+e.Seq+" with "+e.Evts.length+" events");b._pendingBundle=null;b._backoffTime=0;b._backoffRetries=0;b._ctx.wallTime()-b._lastPostTime>a.UploadInterval&&b.maybeSendNextBundle()},function(c){a.logIfDebug("Failed to send events.");d(c)?b._onShutdown():(b._pendingBundleFailed=!0,b._backoffTime=b._lastPostTime+b._poster.exponentialBackoffMs(b._backoffRetries++,!1))})}};b.prototype.sendBundle=
function(a,b,d){void 0===d&&(d=null);var e=c(this._identity.orgId(),this._identity.userId(),this._identity.sessionId(),this._pageId,a);this.post(e,a,b,d)};b.prototype.post=function(b,c,d,e){void 0===e&&(e=null);var g=null;null!=c&&(g=a.stringify(c),this._byteCount+=g.length,a.logIfDebug("total bytes written: "+this._byteCount));this._poster.post(this._protocol,this._bundleHost,b,g,d,e)};return b}();a.HttpEventTransport=e;var k=function(){function c(){}c.prototype.post=function(b,c,d,e,g,k){void 0===
k&&(k=null);c="//"+c+d;var m=!1,f=new XMLHttpRequest;if("withCredentials"in f)f.onreadystatechange=function(){f.readyState!=a.XHR_DONE||m||(m=!0,200==f.status?g(f.responseText):k(f.status))},f.open("POST",b+c,!0),f.withCredentials=!0,f.setRequestHeader("Content-Type","text/plain"),f.send(e);else{var h=new XDomainRequest;h.onload=function(){g(h.responseText)};h.onerror=function(){k("Not Found"==h.responseText?404:500)};h.onprogress=function(){};h.open("POST",c);h.send(e)}};c.prototype.exponentialBackoffMs=
function(a,c){return b(a,c)};return c}();a.XHRPoster=k;a.exponentialBackoffMs=b;a.isErrorFatal=d})(l||(l={}));(function(a){var h=function(){function a(b,c,e){this._ctx=b;this._q=c;this._valueIndices=e;this._evts=[]}a.prototype.add=function(a){0==this._evts.length&&this._q.push(a);this._evts.push(a)};a.prototype.finish=function(a,b){var e=this._evts.length;if(1>=e)return!1;for(var g=this._evts[0].When,k=this._evts[e-1].When,m=0;m<this._valueIndices.length;++m){var f=this._valueIndices[m],p=this._evts[0].Args[f],
h=(this._evts[1].When-g)/(k-g),n=(this._evts[1].Args[f]-p)/h,l=this._evts[e-1].Args[f],h=(k-this._evts[e-2].When)/(k-g);b.push(p,l,n,(l-this._evts[e-2].Args[f])/h)}this._evts[0].Kind=a;this._evts[0].Args=b;return!0};a.prototype.evts=function(){return this._evts};return a}(),f=function(){function b(a){this._ctx=a;this._gotInitialScroll=!1}b.prototype.processQueue=function(b){if(0==b.length)return b;this._ctx.maybeAddInitialScroll();for(var c=this._ctx.now(),e=[],g=new h(this._ctx,e,[0,1]),k={},m={},
f,p=0;p<b.length;++p){var q=b[p];switch(q.Kind){case a.EVENT_MOUSEMOVE:g.add(q);break;case a.EVENT_TOUCHMOVE:var n=q.Args[0];n in k||(k[n]=new h(this._ctx,e,[1,2]));k[n].add(q);break;case a.EVENT_SCROLL:n=q.Args[0];n in m||(m[n]=new h(this._ctx,e,[1,2]));m[n].add(q);break;case a.EVENT_INNERWIDTH:f||(f=new h(this._ctx,e,[0]));f.add(q);break;default:e.push(q)}}g.finish(a.EVENT_MOUSEMOVE_CURVE,[c])&&(b=g.evts(),g=b[b.length-1].Args,2<g.length&&g[2]&&b[0].Args.push(g[2]));for(n in m)b=parseInt(n),m[b].finish(a.EVENT_SCROLL_CURVE,
[c,b]);for(n in k)b=parseInt(n),k[b].finish(a.EVENT_TOUCHMOVE_CURVE,[c,b]);f&&f.finish(a.EVENT_INNERWIDTH_CURVE,[c]);return e};return b}();a.EventProcessor=f})(l||(l={}));(function(a){var h=function(){function f(b,d,c,e){void 0===e&&(e=a.RealTicker);this._ctx=b;this._identity=d;this._transport=c;this._tickerFactory=e;this._recover()}f.prototype.sing=function(b,d,c){a.logIfDebug("Saving "+d.length+" bundles in swan-song.");b={OrgId:this._identity.orgId(),UserId:this._identity.userId(),SessionId:this._identity.sessionId(),
PageId:b,Bundles:d,PageStartTime:this._ctx.startTime(),LastBundleTime:c};try{localStorage.singSwanSong=a.stringify(b)}catch(e){}};f.prototype._recover=function(){try{if("singSwanSong"in localStorage){var b=localStorage.singSwanSong;delete localStorage.singSwanSong;var d=a.parseJson(b);d.Bundles&&d.UserId&&d.SessionId&&d.PageId?(d.OrgId||(d.OrgId=this._identity.orgId()),0<d.Bundles.length&&(a.logIfDebug("Sending "+d.Bundles.length+" bundles as prior page swan song"),this.sendSwanSongBundles(d.OrgId,
d.UserId,d.SessionId,d.PageId,d.PageStartTime,d.Bundles,d.LastBundleTime))):a.logIfDebug("Malformed swan song found. Ignoring it.")}}catch(c){a.logIfDebug("Error recovering swan-song: "+c)}};f.prototype.sendSwanSongBundles=function(b,d,c,e,g,k,m,f){var p=this;void 0===f&&(f=0);var h=null;k.constructor===Array&&(0!==k.length&&void 0!==k[0])&&(1==k.length&&(h=this._ctx.wallTime()-m),this._transport.sendSwanSongBundle(b,d,c,e,k[0],g,h,function(f){a.logIfDebug("Sent "+k[0].Evts.length+" trailing events from last session as Seq "+
k[0].Seq);k.shift();0<k.length?p.sendSwanSongBundles(b,d,c,e,g,k,m):a.logIfDebug("Done with prior page swan song")},function(h){a.isErrorFatal(h)?a.logIfDebug("Fatal error while sending events, giving up"):(a.logIfDebug("Failed to send events from last session, will retry while on this page"),p._lastSwanSongRetryTicker=new p._tickerFactory(a.exponentialBackoffMs(f,!0)),p._lastSwanSongRetryTicker.oneShot(function(){p.sendSwanSongBundles(b,d,c,e,g,k,m,f+1)}))}))};return f}();a.SwanSong=h})(l||(l={}));
(function(a){var h=function(){function a(b){this._interval=b;this._handle=-1}a.prototype.oneShot=function(a){setTimeout(a,this._interval)};a.prototype.start=function(a){-1==this._handle&&(this._handle=setInterval(a,this._interval))};a.prototype.stop=function(){-1!=this._handle&&(clearInterval(this._handle),this._handle=-1)};return a}();a.RealTicker=h;var f=function(){function b(b,c,e,g){void 0===e&&(e=function(){return[]});void 0===g&&(g=h);this._ctx=b;this._transport=c;this._gatherExternalEvents=
e;this._tickerFactory=g;this._recordingDisabled=!1;this._lastWhen=-1;this._lastUserAction=0;this._quiescent=!1;this._lastHeartbeat=0;this._heartbeatInterval=a.HeartbeatInitial;this._gotUnload=!1;this._eventQueue=[];this._sampleCurvesTicker=new this._tickerFactory(a.CurveSamplingInterval);this._processMutationsTicker=new this._tickerFactory(a.MutationProcessingInterval);this._processor=new a.EventProcessor(b)}b.prototype.startPipeline=function(a,b,e){var g=this;this._recordingDisabled||this._pipelineStarted||
(this._pipelineStarted=!0,this._frameId=b,this._parentIds=e,this._lastUserAction=this._ctx.now(),this.processEvents(),this._processMutationsTicker.start(function(){g.processEvents()}),this._sampleCurvesTicker.start(function(){g.processEvents(!0)}),this._transport.startPipeline(a))};b.prototype.enqueue=function(a,b){this.enqueueAt(this._ctx.now(),a,b)};b.prototype.enqueueAt=function(b,c,e){this._recordingDisabled||(b<=this._lastWhen&&(b=this._lastWhen+1),this._lastWhen=b,this._eventQueue.push({When:b,
Kind:c,Args:e}),a.isUserActionEvent(c)&&(this._lastUserAction=b))};b.prototype.enqueueFirst=function(a,b){0<this._eventQueue.length?this._eventQueue.unshift({When:this._eventQueue[0].When,Kind:a,Args:b}):this.enqueue(a,b)};b.prototype.addUnload=function(){this._gotUnload||(this._gotUnload=!0,this.enqueue(a.EVENT_UNLOAD,[]),this._lastUserAction=this._ctx.now(),this.singSwanSong())};b.prototype.shutdown=function(){this._flush();this.addUnload();this._flush();this._recordingDisabled=!0;this.stopPipeline()};
b.prototype._flush=function(){this.processEvents();this._transport.flush()};b.prototype.prequeue=function(a,b){this._recordingDisabled||this._eventQueue.unshift({When:0,Kind:a,Args:b})};b.prototype.appendToQueue=function(a){this._eventQueue=this._eventQueue.concat(a)};b.prototype.singSwanSong=function(){this._recordingDisabled||(this.processEvents(),this._transport.singSwanSong())};b.prototype.rebaseIframe=function(a){for(var b=0,e=this._eventQueue.length;b<e;b++){var g=this._eventQueue[b],k=g.When+
this._ctx.startTime()-a;0>k&&(k=0);g.When=k}};b.prototype.processEvents=function(b){if(this._pipelineStarted&&(this._ctx.now()-this._lastUserAction>a.UserInactivityTimeout?this._quiescent||(this._quiescent=!0,this._heartbeatInterval=a.HeartbeatInitial,this._lastHeartbeat=this._ctx.now()):this._quiescent=!1,!this._quiescent||this.maybeSendHeartbeat())){var c=this._eventQueue;this._eventQueue=[];c=this._processor.processQueue(c);b||(c=c.concat(this._gatherExternalEvents()));this.ensureFrameIds(c);0!=
c.length&&this._transport.enqueueEvents(c)}};b.prototype.maybeSendHeartbeat=function(){var b=this._ctx.now();return b-this._lastHeartbeat>=this._heartbeatInterval?(this._lastHeartbeat=b,this._heartbeatInterval*=2,this._heartbeatInterval>a.HeartbeatMax&&(this._heartbeatInterval=a.HeartbeatMax),this.enqueue(a.EVENT_HEARTBEAT,[]),!0):!1};b.prototype.ensureFrameIds=function(a){if(this._frameId)for(var b=this._parentIds,e=b&&0<b.length,g=0;g<a.length;++g){var k=a[g];k.FId||(k.FId=this._frameId);e&&!k.PIds&&
(k.PIds=b)}};b.prototype.stopPipeline=function(){this._pipelineStarted&&(this._sampleCurvesTicker.stop(),this._processMutationsTicker.stop(),this._eventQueue=[],this._transport.stopPipeline())};return b}();a.EventQueue=f})(l||(l={}));(function(a){var h=function(){function f(a,d){this._queue=a;this._wnd=d;this._overflow=this._enabled=!1;this._total=0}f.prototype.enable=function(){var b=this;b._enabled||(b._enabled=!0,this._wnd.console?(console.log&&console.log.apply&&(b._oldLog=console.log,console.log=
a.$entry(function(){b.addLog("log",arguments);return b._oldLog.apply(this,arguments)})),console.info&&console.info.apply&&(b._oldInfo=console.info,console.info=a.$entry(function(){b.addLog("info",arguments);return b._oldInfo.apply(this,arguments)})),console.warn&&console.warn.apply&&(b._oldWarn=console.warn,console.warn=a.$entry(function(){b.addLog("warn",arguments);return b._oldWarn.apply(this,arguments)})),console.error&&console.error.apply&&(b._oldError=console.error,console.error=a.$entry(function(){b.addLog("error",
arguments);return b._oldError.apply(this,arguments)}))):b.addLog("log",["NOTE: Log messages cannot be captured on IE9"]),b._oldOnError=this._wnd.onerror,this._wnd.onerror=function(a,c,e){b.addError(a,c,e);if(b._oldOnError)return b._oldOnError.apply(this,arguments)})};f.prototype.disable=function(){this._enabled&&(this._enabled=!1,this._oldLog&&(console.log=this._oldLog),this._oldInfo&&(console.info=this._oldInfo),this._oldWarn&&(console.warn=this._oldWarn),this._oldError&&(console.error=this._oldError),
this._wnd.onerror=this._oldOnError)};f.prototype.addLog=function(b,d){if(this.checkOverflow()){for(var c=[b],e=0;e<d.length;++e)c.push(a.stringify(d[e],1E3));this._queue.enqueue(a.EVENT_LOG,c)}};f.prototype.addError=function(b,d,c){this.checkOverflow()&&("object"==typeof b&&(b=a.stringify(b,1E3)),"object"==typeof d&&(d=a.stringify(d,100)),"object"==typeof c&&(c=-1),this._queue.enqueue(a.EVENT_ERROR,[b,d,c]))};f.prototype.checkOverflow=function(){if(this._overflow)return!1;if(this._total==a.MAX_LOGS_PER_PAGE)return this._queue.enqueue(a.EVENT_LOG,
["warn",f.OVERFLOW_MSG]),this._overflow=!0,!1;this._total++;return!0};f.OVERFLOW_MSG='"[received more than '+a.MAX_LOGS_PER_PAGE+' messages; no longer recording console]"';return f}();a.ConsoleWatcher=h})(l||(l={}));(function(a){a.Node_ELEMENT_NODE=1;a.Node_ATTRIBUTE_NODE=2;a.Node_TEXT_NODE=3;a.Node_CDATA_SECTION_NODE=4;a.Node_ENTITY_REFERENCE_NODE=5;a.Node_ENTITY_NODE=6;a.Node_PROCESSING_INSTRUCTION_NODE=7;a.Node_COMMENT_NODE=8;a.Node_DOCUMENT_NODE=9;a.Node_DOCUMENT_TYPE_NODE=10;a.Node_DOCUMENT_FRAGMENT_NODE=
11;a.Node_NOTATION_NODE=12;a.XHR_UNSENT=0;a.XHR_OPENED=1;a.XHR_HEADERS_RECEIVED=2;a.XHR_LOADING=3;a.XHR_DONE=4})(l||(l={}));(function(a){function h(a){return"_fsblocked"in a}function f(a){return a._fsblocked}function b(a,b){a._fsblocked=b}function d(a){return a?a._fs:null}function c(a){return(a=d(a))?a.id:0}function e(a){a.parent&&(a.parent.child==a&&(a.parent.child=a.next),a.parent.lastChild==a&&(a.parent.lastChild=a.prev),a.prev&&(a.prev.next=a.next),a.next&&(a.next.prev=a.prev),a.parent=a.prev=
a.next=null,a.id=0,a.child&&g(a.child))}function g(a){for(a=[a];0<a.length&&1E4>a.length;){var b=a.pop();b.id=0;b.next&&a.push(b.next);b.child&&a.push(b.child)}}function k(a,b){if(a.attributes&&0<a.attributes.length)for(var c=0;c<a.attributes.length;c++){var e=a.attributes[c];b(e.name,e.value)}}function m(a,b,c,e){"class"==b&&0>c.indexOf("_fs_block_")?c+=" _fs_block_"+f(a):"style"!=b&&("type"==b&&"object"==a.tagName.toLowerCase()||"value"==b||"checked"==b||"src"==b||"data"==b)&&(c=null);return c}
a.isBlocked=h;a.blockKind=f;a.setBlocked=b;a.mirrorFor=d;a.fsid=c;a.fsidIfNotBlocked=function(a){return h(a)?0:c(a)};a.removeMirror=e;a.clearIds=g;var r=function(){function c(a){this._blocker=a;this._curId=1}c.prototype.curId=function(){return this._curId};c.prototype.tokenizeNode=function(a,b,c,g){var k=this._curId;try{var m=d(a),f=d(b);b=[];var h=this.tokeNode(c,b,g);h&&a&&(e(h),h.parent=m,f==m.child&&(m.child=h),h.next=f,null==f?(h.prev=m.lastChild,m.lastChild=h):h.prev=f.prev,null!=h.prev&&(h.prev.next=
h),null!=h.next&&(h.next.prev=h));return b}catch(r){return this._curId=k,[]}};c.prototype.tokeNode=function(b,c,e){if("SCRIPT"==b.nodeName||b.nodeType==a.Node_COMMENT_NODE)return null;var d={id:this._curId++,node:b};b._fs=d;var g=b.nodeName;"http://www.w3.org/2000/svg"==b.namespaceURI&&(g="svg:"+g);c.push("<"+g);try{if(this.processBlockedElem(b,c))return d;e&&e(b);k(b,function(a,b){c.push(":"+a);c.push(b)});if(b.firstChild){c.push("[");for(var g=null,m=b.firstChild;m;m=m.nextSibling){var f=this.tokeNode(m,
c,e);f&&(f.parent=d,g?(g.next=f,f.prev=g):d.child=f,g=d.lastChild=f)}c.push("]")}b.nodeType==a.Node_TEXT_NODE&&c.push(b.textContent)}catch(h){}return d};c.prototype.processBlockedElem=function(c,e){var d=this;if(c.nodeType==a.Node_ELEMENT_NODE&&this._blocker){var g=this._blocker.isBlocked(c);if(g){b(c,g);var f,h=!1;k(c,function(a,b){b=m(c,a,b,d._blocker);"class"==a?f=!0:"style"==a&&(h=!0);null!=b&&(e.push(":"+a),e.push(b))});f||(e.push(":class"),e.push("_fs_block_"+g));h||(e.push(":style"),e.push(this._blocker.mungeBlockedStyle(c,
"")));return!0}}return!1};return c}();a.NodeEncoder=r;a.rewriteBlockedAttribute=m})(l||(l={}));(function(a){var h=function(){function f(b,d,c,e){void 0===e&&(e=function(a,b){});this._ctx=b;this._blocker=d;this._wnd=c;this._visitor=e;this._sentDomSnapshot=!1;this._records=[];this._lz=new a.LZJGWEncoder;this._encoder=new a.NodeEncoder(d)}f.prototype.hookMutations=function(a){var d=this;void 0===a&&(a=this._wnd.document.documentElement);this._root=a;this._sentDomSnapshot=!1;this._observer=new window.MutationObserver(function(a){d._records=
d._records.concat(a)});this._observer.observe(a,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0})};f.prototype.shutdown=function(){this._observer&&this._observer.disconnect();var b=a.mirrorFor(this._root);b&&a.clearIds(b);this._records=[]};f.prototype.processMutations=function(){if(!this._root)return[];var b=this._ctx.now(),d=[];this._sentDomSnapshot||(this.genInsert(b,d,null,this._root,null),this._sentDomSnapshot=!0);if(0==this._records.length)return d;
var c={},e={};this.processRecords(b,d,e,c);for(var g in e){var k=g.split(":");d.push({Kind:a.EVENT_MUT_ATTR,When:b,Args:[parseInt(k[0]),k[1],e[g]]})}for(g in c)d.push({Kind:a.EVENT_MUT_TEXT,When:b,Args:[parseInt(g),c[g]]});this._records=[];return d};f.prototype.processRecords=function(b,d,c,e){for(var g={},k={},m=0;m<this._records.length;++m)try{var f=this._records[m],h=a.fsid(f.target);if(h)switch(g[h]=f.target,f.type){case "childList":if(0<f.removedNodes.length)for(var l=0;l<f.removedNodes.length;++l){var n=
a.mirrorFor(f.removedNodes[l]);n&&n.id&&n.parent==a.mirrorFor(f.target)&&n.next==a.mirrorFor(f.nextSibling)&&this.genRemove(b,d,n)}h&&(k[h]=f.target);break;case "characterData":var v=f.target.textContent;f.oldValue!=v&&(a.isBlocked(f.target)||(e[h]=v));break;case "attributes":var z=f.attributeName;f.target.hasAttribute(z)?(v=f.target.getAttribute(z),f.oldValue!=v&&(v=this.rewriteAttr(f.target,z,v),null!==v&&(c[h+":"+z]=v))):c[h+":"+z]=null}}catch(s){}for(var y in k)c=k[y],(e=a.mirrorFor(c))&&e.id&&
this.diff(b,d,c,e.child,c.firstChild);for(y in g)c=g[y],this.maybeAddPlaceholderResize(b,d,c)};f.prototype.diff=function(b,d,c,e,g){for(var k=[];e&&g;){var f=a.mirrorFor(g);a.fsid(g)?e.id==f.id?(e=e.next,g=g.nextSibling):(k.push({remove:e}),e=e.next):(k.push({insert:[c,g,e.node]}),g=g.nextSibling)}for(;e;e=e.next)k.push({remove:e});for(;g;g=g.nextSibling)k.push({insert:[c,g,null]});for(c=0;c<k.length;c++)e=k[c],e.insert?this.genInsert(b,d,e.insert[0],e.insert[1],e.insert[2]):e.remove&&this.genRemove(b,
d,e.remove)};f.prototype.maybeAddPlaceholderResize=function(b,d,c){try{for(;c&&!a.fsid(c);)c=c.parentNode;if(c&&a.isBlocked(c)){var e=c.getBoundingClientRect(),g=Math.floor(e.width),k=Math.floor(e.height);d.push({When:b,Kind:a.EVENT_PLACEHOLDER_SIZE,Args:[a.fsid(c),g,k]})}}catch(f){}};f.prototype.genInsert=function(b,d,c,e,g){var k=this;if(c&&a.isBlocked(c))return null;var f=a.fsid(c)||-1,h=a.fsid(g)||-1;c=this._encoder.tokenizeNode(c,g,e,function(a){k._visitor(b,a)});0<c.length&&d.push({When:b,Kind:a.EVENT_MUT_INSERT,
Args:[f,h,this._lz.encode(c)]})};f.prototype.genRemove=function(b,d,c){var e=c.id;a.removeMirror(c);if(0<d.length&&(c=d[d.length-1],c.Kind==a.EVENT_MUT_REMOVE)){c.Args.push(e);return}d.push({When:b,Kind:a.EVENT_MUT_REMOVE,Args:[e]})};f.prototype.rewriteAttr=function(b,d,c){a.isBlocked(b)&&(c=a.rewriteBlockedAttribute(b,d,c,this._blocker));return c};return f}();a.MutationWatcher=h})(l||(l={}));(function(a){function h(a,b){var d=Object.getOwnPropertyDescriptor(a.prototype,b);Object.defineProperty(a.prototype,
b,{set:function(a){var b=this;setTimeout(function(){c&&c(b)},0);return d.set.call(this,a)},get:function(){return d.get.call(this)}})}function f(a){switch(a.type){case "checkbox":case "radio":return""+a.checked;default:return(a=a.value)||(a=""),""+a}}var b=function(){function b(e,d){var m=this;this._onchange=e;this._checkElem=d;this._fallback=!1;this._elems={};this._values={};c=function(b){var c=a.fsid(b);if(c&&(b=m._elems[c])){var e=f(b);e!=m._values[c]&&(m._onchange(b),m._values[c]=e)}}}b.prototype.hookEvents=
function(){var a;(a=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"))&&a.set?(d||(h(HTMLInputElement,"value"),h(HTMLInputElement,"checked"),h(HTMLSelectElement,"value"),h(HTMLTextAreaElement,"value"),d=!0),a=!0):a=!1;a||(this._fallback=!0)};b.prototype.addInput=function(b){var c=a.fsid(b);this._elems[c]=b;this._values[c]=f(b);this._values[c]&&this._onchange(b)};b.prototype.invokeGlobalOnChange=function(a){c&&c(a)};b.prototype.tick=function(){for(var a in this._elems)if(!this._checkElem(this._elems[a]))delete this._elems[a],
delete this._values[a];else if(this._fallback){var b=this._elems[a],c=f(b);c!=this._values[a]&&(this._onchange(b),this._values[a]=c)}};b.prototype.shutdown=function(){c=null};b.prototype._usingFallback=function(){return this._fallback};b.prototype._trackingElem=function(a){return!!this._elems[a]};return b}();a.InputWatcher=b;var d=!1,c;a.valueOfInputishElem=f})(l||(l={}));(function(a){var h=function(){function f(b,d,c,e,g){var k=this;this._ctx=b;this._queue=d;this._blocker=c;this._wnd=e;this._onFrameCreated=
g;this._clientHeight=this._clientWidth=this._curWindowScrollY=this._curWindowScrollX=-1;this._curInnerWidth=0;this._scrollTimeouts={};this._quirks=!1;this._listeners=new a.DomListeners;this._initialized=!1;this._doc=e.document;this._loc=e.location;this._hst=e.history;this._quirks="BackCompat"==this._doc.compatMode;this._currentUrl=this._loc.href;this._inputWatcher=new a.InputWatcher(function(a){k.addChangeElem(a)},function(b){return!!a.fsid(b)});this._mutWatcher=new a.MutationWatcher(b,c,e,function(a,
b){k.visitNode(a,b)})}f.prototype.onDomLoad=function(){var b=this;this.addDomLoaded();this.addResize();this._mutWatcher.hookMutations();this._inputWatcher.hookEvents();this._listeners.add(this.docElem(),"scroll",!0,function(a){b.addScroll(a)});this._listeners.add(this._wnd,"mousemove",!0,function(a){b.addMouseMove(a)});this._listeners.add(this._wnd,"mousedown",!0,function(a){b.addMouseDown(a)});this._listeners.add(this._wnd,"mouseup",!0,function(a){b.addMouseUp(a)});this._listeners.add(this._wnd,
"keydown",!0,function(a){b.addKeyDown(a)});this._listeners.add(this._wnd,"keyup",!0,function(a){b.addKeyUp(a)});this._listeners.add(this._wnd,"click",!0,function(a){b.addClick(a)});this._listeners.add(this._wnd,"dblclick",!0,function(a){b.addDblClick(a)});this._listeners.add(this._wnd,"focus",!0,function(a){b.addFocus(a)});this._listeners.add(this._wnd,"blur",!0,function(a){b.addBlur(a)});this._listeners.add(this._wnd,"change",!0,function(a){b.addChange(a)});this._listeners.add(this._wnd,"touchstart",
!0,function(c){b.addTouchEvent(c,a.EVENT_TOUCHSTART);b.addWindowScroll()});this._listeners.add(this._wnd,"touchend",!0,function(c){b.addTouchEvent(c,a.EVENT_TOUCHEND);b.addWindowScroll()});this._listeners.add(this._wnd,"touchmove",!0,function(c){b.addTouchEvent(c,a.EVENT_TOUCHMOVE);b.addWindowScroll()});this._listeners.add(this._wnd,"touchcancel",!0,function(c){b.addTouchEvent(c,a.EVENT_TOUCHCANCEL)});this._listeners.add(this._wnd,"play",!0,function(c){b.addPlayPauseEvent(c,a.EVENT_PLAY)});this._listeners.add(this._wnd,
"pause",!0,function(c){b.addPlayPauseEvent(c,a.EVENT_PAUSE)});this._listeners.add(this._wnd,"scroll",!1,function(a){b.addWindowScroll()});this._listeners.add(this._wnd,"resize",!1,function(a){b.addResize()});this._listeners.add(this._wnd,"submit",!1,function(a){b.addFormSubmit(a)});this._listeners.add(this._wnd,"focus",!1,function(a){b.addWindowFocus(a)});this._listeners.add(this._wnd,"blur",!1,function(a){b.addWindowBlur(a)});this._listeners.add(this._wnd,"popstate",!1,function(){b.addNavigate()});
if(this._hst.pushState){var d=this;this._oldPushState=this._hst.pushState;this._hst.pushState=function(a,b,g){d._oldPushState.apply(this,arguments);d.addNavigate()};this._oldReplaceState=this._hst.replaceState;this._hst.replaceState=function(a,b,g){d._oldReplaceState.apply(this,arguments);d.addNavigate()}}this._initialized=!0};f.prototype.onLoad=function(){this.addLoad()};f.prototype.bundleEvents=function(){this._inputWatcher.tick();this.addWindowInnerWidth();return this._mutWatcher.processMutations()};
f.prototype.shutdown=function(){this._initialized&&(this._initialized=!1,this._listeners.clear(),this._hst.pushState=this._oldPushState,this._hst.replaceState=this._oldReplaceState,this._oldReplaceState=this._oldPushState=null,this._inputWatcher.shutdown(),this._mutWatcher.shutdown())};f.prototype.docElem=function(){return this._doc.documentElement};f.prototype.visitNode=function(b,d){switch(d.nodeName){case "INPUT":case "TEXTAREA":case "SELECT":this._inputWatcher.addInput(d);break;case "FRAME":case "IFRAME":this._onFrameCreated(d);
break;case "VIDEO":case "AUDIO":d.paused||this.addPlayPauseEventById(a.fsid(d),a.EVENT_PLAY)}};f.prototype.addMouseMove=function(b){b=a.fsid(b.target)?[b.clientX,b.clientY,a.fsid(b.target)]:[b.clientX,b.clientY];this._queue.enqueue(a.EVENT_MOUSEMOVE,b)};f.prototype.addMouseDown=function(b){this._queue.enqueue(a.EVENT_MOUSEDOWN,[b.clientX,b.clientY])};f.prototype.addMouseUp=function(b){this._queue.enqueue(a.EVENT_MOUSEUP,[b.clientX,b.clientY])};f.prototype.addTouchEvent=function(a,d){if(void 0!==a.changedTouches)for(var c=
0;c<a.changedTouches.length;++c){var e=a.changedTouches[c];isNaN(parseInt(e.identifier))&&(e.identifier=0);this._queue.enqueue(d,[e.identifier,e.clientX,e.clientY])}};f.prototype.addPlayPauseEvent=function(b,d){var c=a.fsid(b.target);c&&this.addPlayPauseEventById(c,d)};f.prototype.addPlayPauseEventById=function(a,d){this._queue.enqueue(d,[a])};f.prototype.addWindowFocus=function(b){this._queue.enqueue(a.EVENT_WINDOW_FOCUS,[])};f.prototype.addWindowBlur=function(b){this._queue.enqueue(a.EVENT_WINDOW_BLUR,
[])};f.prototype.maybeAddValueChange=function(){var a=this._doc.activeElement;a&&this._inputWatcher.invokeGlobalOnChange(a)};f.prototype.addKeyDown=function(b){var d=this._doc.activeElement;if(!d||a.fsidIfNotBlocked(d))this.maybeAddValueChange(),this._queue.enqueue(a.EVENT_KEYDOWN,[b.keyCode])};f.prototype.addKeyUp=function(b){var d=this._doc.activeElement;if(!d||a.fsidIfNotBlocked(d))this.maybeAddValueChange(),this._queue.enqueue(a.EVENT_KEYUP,[b.keyCode])};f.prototype.addWindowInnerWidth=function(){var b=
this._wnd.innerWidth;b!=this._curInnerWidth&&(this._queue.enqueue(a.EVENT_INNERWIDTH,[b]),this._curInnerWidth=b)};f.prototype.doWorkInScrollTimeout=function(b,d){var c=this;b in this._scrollTimeouts||(this._scrollTimeouts[b]=d,setTimeout(function(){if(b in c._scrollTimeouts){var a=c._scrollTimeouts[b];delete c._scrollTimeouts[b];a()}},a.ScrollSampleInterval))};f.prototype._fireScrollTimeouts=function(){for(var a in this._scrollTimeouts)this._scrollTimeouts[a](),delete this._scrollTimeouts[a];this._scrollTimeouts=
[]};f.prototype.addWindowScroll=function(){var b=this,d=a.fsid(this._doc.body);d&&this.doWorkInScrollTimeout(d,function(){var c,e;"pageXOffset"in b._wnd?(c=b._wnd.pageXOffset,e=b._wnd.pageYOffset):(c=b._doc.body.scrollLeft,e=b._doc.body.scrollTop);if(c!=b._curWindowScrollX||e!=b._curWindowScrollY)b._queue.enqueue(a.EVENT_SCROLL,[d,c,e]),b._curWindowScrollX=c,b._curWindowScrollY=e;b.addWindowInnerWidth()})};f.prototype.addScroll=function(b){var d=this,c=b.target,e=a.fsid(c);e&&this.doWorkInScrollTimeout(e,
function(){d._queue.enqueue(a.EVENT_SCROLL,[e,c.scrollLeft,c.scrollTop])})};f.prototype.addResize=function(){var b,d;this._quirks?(b=this._doc.body.clientWidth,d=this._doc.body.clientHeight):(b=this.docElem().clientWidth,d=this.docElem().clientHeight);if(b!=this._clientWidth||d!=this._clientHeight)this._clientWidth=b,this._clientHeight=d,b=Math.max(this._wnd.innerWidth||-1,this._clientWidth),this.isMediaValue("width",b)||(b=this.findMediaValue("width",b,b+128)||b),d=Math.max(this._wnd.innerHeight,
this._clientHeight),this.isMediaValue("height",d)||(d=this.findMediaValue("height",d,d+128)||d),b==this._clientWidth&&d==this._clientHeight?this._queue.enqueue(a.EVENT_RESIZE,[this._clientWidth,this._clientHeight]):this._queue.enqueue(a.EVENT_RESIZE,[this._clientWidth,this._clientHeight,b,d])};f.prototype.isMediaValue=function(a,d){return this._wnd.matchMedia?this._wnd.matchMedia("(min-"+a+": "+d+"px)").matches&&this._wnd.matchMedia("(max-"+a+": "+d+"px)").matches:!0};f.prototype.findMediaValue=function(a,
d,c){if(!this._wnd.matchMedia)return 0;for(;d<c;){var e=Math.floor((d+c)/2);if(this._wnd.matchMedia("(min-"+a+": "+e+"px)").matches){if(this._wnd.matchMedia("(max-"+a+": "+e+"px)").matches)return e;d=e+1}else c=e-1}return 0};f.prototype.addDomLoaded=function(){this._queue.enqueue(a.EVENT_DOMLOADED,[])};f.prototype.addLoad=function(){this._queue.enqueue(a.EVENT_LOAD,[])};f.prototype.addNavigate=function(){var b=this._loc.href;this._currentUrl!=b&&(this._currentUrl=b,this._queue.enqueue(a.EVENT_NAVIGATE,
[this._loc.href,this._doc.title]))};f.prototype.addClick=function(b){(b=a.fsid(b.target))&&this._queue.enqueue(a.EVENT_CLICK,[b])};f.prototype.addDblClick=function(b){(b=a.fsid(b.target))&&this._queue.enqueue(a.EVENT_DBL_CLICK,[b])};f.prototype.addFormSubmit=function(b){(b=a.fsid(b.target))&&this._queue.enqueue(a.EVENT_FORM_SUBMIT,[b])};f.prototype.addFocus=function(b){(b=a.fsid(b.target))&&this._queue.enqueue(a.EVENT_FOCUS,[b])};f.prototype.addBlur=function(b){(b=a.fsid(b.target))&&this._queue.enqueue(a.EVENT_BLUR,
[b])};f.prototype.addChange=function(a){this._inputWatcher.invokeGlobalOnChange(a.target)};f.prototype.addChangeElem=function(b){var d=a.fsidIfNotBlocked(b);d&&this._queue.enqueue(a.EVENT_VALUECHANGE,[d,a.valueOfInputishElem(b)])};return f}();a.EventWatcher=h})(l||(l={}));(function(a){var h=function(){function f(b,d){var c=this;this._queue=b;this._identity=d;this.AccountSystemVars={acctId:"str",displayName:"str",website:"str"};this.UserSystemVars={uid:"str",displayName:"str",email:"str"};this.VarTypes=
{str:function(a){return"string"==typeof a},bool:function(a){return"boolean"==typeof a},"int":function(a){return"number"==typeof a&&0==a-Math.floor(a)},real:function(a){return"number"==typeof a},date:function(a){return a?!isNaN(a.constructor===Date?a:new Date(a)):!1}};this._apiImpl=a.$entry(function(b,d){switch(b){case "account":if(c._identity.poisoned()){a.logIfDebug("blocking FS.identifyAccount API call due to mismatched user ID");break}c.setvar_api("acct",c.AccountSystemVars,d);break;case "user":var k=
c._identity.setAppId(d.uid),f=k[1];if(!k[0]){switch(f){case "newuid":c._queue.enqueue(a.EVENT_SYS_HIGHLIGHT,["newuid",d.uid,c._identity.appKey()]);break;case "fsidentity":c._queue.enqueue(a.EVENT_SYS_HIGHLIGHT,["fsidentity",d.uid]);break;case void 0:break;default:a.logIfDebug("unexpected failReason returned from setAppId: "+f)}break}c.setvar_api("user",c.UserSystemVars,d);break;default:a.logIfDebug('invalid operation "'+b+'"; only "account" and "user" are supported at present')}})}f.prototype.api=
function(a,d){this._apiImpl(a,d)};f.prototype.processApiQueue=function(a){if(a)for(var d=0;d<a.length;d++)this.api(a[d][0],a[d][1])};f.prototype.setvar_api=function(b,d,c){var e={},g;for(g in c)if(c.hasOwnProperty(g)){var f=c[g];a.logIfDebug("set-var('"+b+"'): \""+g+'" = '+a.stringify(f));var m=typeof f;if("object"!==m||f&&f.constructor==Date){var h,l;if(g in d)h=g,l=d[g];else{l=g.split("_");if(2!=l.length){a.logIfDebug('variables must be of the form "name_type", where "type" is one of [str, bool, int, real, date]');
this._queue.enqueue(a.EVENT_SYS_HIGHLIGHT,["varname",b+":"+g]);continue}-1!=g.indexOf(" ")?(h=g.replace(/ /g,""),this._queue.enqueue(a.EVENT_SYS_HIGHLIGHT,["varname",b+":"+g]),a.logIfDebug("Warning: variable '"+g+"' has spaces in it, which is disallowed. Converted name to '"+h+"'.")):h=g;l=l[1]}l in this.VarTypes?this.VarTypes[l](f)?("str"==l&&(f=f.trim()),"date"==l&&(f=this.toIsoString(f)),e[h]=f):(a.logIfDebug("illegal value "+a.stringify(f)+" for type "+l),"number"===m?m=0==f-Math.floor(f)?"integer":
"real":"object"==m&&(null!=f&&f.constructor==Date)&&(m=isNaN(f)?"invalid date":"date"),this._queue.enqueue(a.EVENT_SYS_HIGHLIGHT,["vartype",b+":"+g,m])):(a.logIfDebug('invalid type "'+l+'"'),this._queue.enqueue(a.EVENT_SYS_HIGHLIGHT,["varname",b+":"+g]))}else f instanceof Array&&(m="array"),this._queue.enqueue(a.EVENT_SYS_HIGHLIGHT,["vartype",b+":"+g,m+" (unsupported)"])}this._queue.enqueue(a.EVENT_SYS_SETVAR,[b,a.stringify(e)])};f.prototype.toIsoString=function(a){return(a.constructor===Date?a:new Date(a)).toISOString()};
return f}();a.Vars=h})(l||(l={}));(function(a){function h(b){try{var c=a.parseJson(b);if("__fs"in c)return c.__fs}catch(d){}return[]}function f(a){var c=a.src;return!a.hasAttribute("src")||"about:blank"==c||0==c.indexOf("javascript:")||0==c.indexOf(b)}a.FS_REQUEST_FRAME_ID="RequestFrameId";a.FS_SET_FRAME_ID_CMD="SetFrameId";a.FS_IFRAME_EVENTS="EvtBundle";a.FS_SHUTDOWN_FRAME="ShutdownFrame";a.FS_RESTART_FRAME="RestartFrame";var b=location.protocol+"//"+location.host;a.defaultInjector=function(b,c,
d,f){a.logIfDebug("Injecting into Frame ["+b.src+"]");try{if(b.src&&("about:blank"!=b.src&&0>b.src.indexOf("javascript:"))&&b.src!=b.contentWindow.location.href)a.logIfDebug("Frame not yet loaded: "+b.src);else if(b.contentWindow[a.Namespace()])a.logIfDebug("FS already defined in Frame contentWindow: "+b.src+". Ignoring.");else{var h=b.contentWindow,l=b.contentDocument;h._fs_org=c;h._fs_host=d;h._fs_debug=a.isDebug();h._fs_run_in_iframe=!0;var q=l.createElement("script");q.async=!0;q.src=f+"//"+d+
"/s/fs.js";l.head.appendChild(q)}}catch(n){a.logIfDebug("iFrame no injecty. Probably not same origin.")}};(function(a){a[a.NoInfoYet=1]="NoInfoYet";a[a.Enabled=2]="Enabled";a[a.Disabled=3]="Disabled"})(a.GetCurrentSessionEnabledState||(a.GetCurrentSessionEnabledState={}));var d=a.GetCurrentSessionEnabledState,c=function(){function b(c,d,e,f,h,l,n,v){var z=this;this._ctx=c;this._host=d;this._protocol=e;this._orgId=f;this._wnd=h;this._injector=v;this._iFrames=[];this._pendingChildFrameIdInits=[];this._listeners=
new a.DomListeners;this._blocker=new a.Blocker;this._identity=new a.Identity(d,f,this._wnd.document);this._transport=n(h,c,d,e,this._identity,function(){z.shutdown()});this._queue=new a.EventQueue(c,this._transport,function(){return z._eventWatcher.bundleEvents()},l);this._eventWatcher=new a.EventWatcher(c,this._queue,this._blocker,h,function(a){z.onFrameCreated(a)});this._consoleWatcher=new a.ConsoleWatcher(this._queue,h)}b.prototype.start=function(b){var c=this;this._onFullyStarted=b;this._blocker.addPredicateRule({Selector:function(a){return"object"!=
a.tagName.toLowerCase()?!1:!(w.IMAGE_FILENAME.test(a.data)&&(void 0===a.type||0==a.type.lastIndexOf("image",0)))},Kind:a.NYI_KIND});this._blocker.addRule({Selector:"embed",Kind:a.NYI_KIND});this._blocker.addRule({Selector:"canvas",Kind:a.NYI_KIND});this._blocker.addRule({Selector:"noscript",Kind:a.BLOCKED_KIND});this._blocker.addRule({Selector:".fs-hide",Kind:a.HIDE_KIND});this._consoleWatcher.enable();this._listeners.add(this._wnd,"beforeunload",!1,function(a){c._queue.addUnload()});this._listeners.add(this._wnd,
"unload",!1,function(a){c._queue.addUnload()});this._listeners.add(this._wnd,"message",!1,function(a){"string"==typeof a.data&&c.postMessageReceived(a.source,h(a.data))})};b.prototype.getCurrentSessionEnabled=function(){return d.Disabled};b.prototype.identity=function(){return this._identity};b.prototype.vars=function(){return null};b.prototype.eventWatcher=function(){return this._eventWatcher};b.prototype.console=function(){return this._consoleWatcher};b.prototype.onDomLoad=function(){this._eventWatcher.onDomLoad()};
b.prototype.onLoad=function(){this._eventWatcher.onLoad()};b.prototype.shutdown=function(){this._queue.shutdown();this._eventWatcher.shutdown();this._consoleWatcher.disable();this._listeners.clear();this.tellAllFramesTo([a.FS_SHUTDOWN_FRAME])};b.prototype.tellAllFramesTo=function(b){for(var c=0;c<this._iFrames.length;c++){var d=this._iFrames[c].contentWindow;d&&d.postMessage&&d.postMessage(a.stringify({__fs:b}),"*")}};b.prototype.fullyStarted=function(){this._onFullyStarted()};b.prototype.flushPendingChildFrameInits=
function(){if(0<this._pendingChildFrameIdInits.length){for(var a=0;a<this._pendingChildFrameIdInits.length;a++)this._pendingChildFrameIdInits[a]();this._pendingChildFrameIdInits=[]}};b.prototype.onFrameCreated=function(b){var c=this,d=a.fsid(b);d?(this._iFrames.push(b),f(b)?(a.logIfDebug("Attempting to setup Frame ["+b.src+"]"),this._injector(b,this._orgId,this._host,this._protocol),b.addEventListener("load",function(d){a.logIfDebug("onload for frame ["+b.src+"]");c._injector(b,c._orgId,c._host,c._protocol)})):
(a.logIfDebug("Frame Doesn't need injecting. Probably cross domain ["+b.src+"]"),b.contentWindow.postMessage&&(a.logIfDebug("Eagerly sending FrameId "+d+" to Frame ["+b.src+"]"),this.sendFrameIdToInnerFrame(b.contentWindow,d)))):a.logIfDebug("fsid missing or invalid for iFrame."+b.src)};b.prototype.postMessageReceived=function(b,c){switch(c[0]){case a.FS_IFRAME_EVENTS:var d=c[1];0<d.length&&this._transport.enqueueEvents(d);break;case a.FS_REQUEST_FRAME_ID:d=this.iFrameWndToFsId(b),b&&d?(a.logIfDebug("Responding to FID request for frame "+
d),this.sendFrameIdToInnerFrame(b,d)):a.logIfDebug("No FrameId found. Hoping to send one later.")}};b.prototype.sendFrameIdToInnerFrame=function(b,c){var d=this,e=function(){var e=[];0!=d._frameId&&(e=d._parentIds?d._parentIds.concat(d._frameId):[d._frameId]);e=[a.FS_SET_FRAME_ID_CMD,c,e,d._ctx.startTime(),d._blocker.rawRules,d._identity.cookieData(),d._pageId];b&&b.postMessage&&b.postMessage(a.stringify({__fs:e}),"*")};null==this._frameId?this._pendingChildFrameIdInits.push(e):e()};b.prototype.iFrameWndToFsId=
function(b){for(var c=0;c<this._iFrames.length;c++)if(this._iFrames[c].contentWindow==b)return a.fsid(this._iFrames[c]);a.logIfDebug("Unable to locate frame for window");return NaN};return b}();a.Recorder=c;a.parsePostMessageData=h})(l||(l={}));(function(a){a.CompiledTimestamp=1486676296;a.CompiledVersion="UNSET"})(l||(l={}));var x=this&&this.__extends||function(a,h){function f(){this.constructor=a}for(var b in h)h.hasOwnProperty(b)&&(a[b]=h[b]);a.prototype=null===h?Object.create(h):(f.prototype=
h.prototype,new f)};(function(a){function h(b,d,c,e,f,h){return new a.HttpEventTransport(d,c,e,f,h)}var f=function(b){function d(c,d,f,k,m,l,p,q,n){var v=this;void 0===m&&(m=window);void 0===l&&(l=a.RealTicker);void 0===p&&(p=new a.XHRPoster);void 0===q&&(q=h);void 0===n&&(n=a.defaultInjector);b.call(this,c,d,f,k,m,l,q,n);this._poster=p;this._domLoaded=!1;this._doc=this._wnd.document;this._vars=new a.Vars(this._queue,this._identity);this._frameId=0;this._getCurrentSessionEnabled=a.GetCurrentSessionEnabledState.NoInfoYet;
a.set_fs_shutdown(function(a){v._queue.shutdown();a&&(a=v._doc.getElementById(a))&&a.setAttribute("_fs_embed_token",v._embedToken)})}x(d,b);d.prototype.getCurrentSessionEnabled=function(){return this._getCurrentSessionEnabled};d.prototype.vars=function(){return this._vars};d.prototype.onDomLoad=function(){b.prototype.onDomLoad.call(this);this._domLoaded=!0;this.injectIntegrationScript()};d.prototype.start=function(c){var d=this;b.prototype.start.call(this,c);this._identity.initFromCookies(this._host,
this._orgId);a.logIfDebug("script version "+a.CompiledVersion+" (compiled at "+a.CompiledTimestamp+")");(c=window[a.Namespace()])&&"q"in c&&(this._vars.processApiQueue(c.q),delete window[a.Namespace()].q);var f=this._doc.documentElement;c=a._fs_replay_flags();f={OrgId:this._identity.orgId(),UserId:this._identity.userId(),Url:location.href,Base:a.baseUri(this._doc),Width:f.clientWidth,Height:f.clientHeight,ScreenWidth:this._wnd.screen.width,ScreenHeight:this._wnd.screen.height,Referrer:this._doc.referrer,
Doctype:a.doctypeString(this._doc),CompiledTimestamp:a.CompiledTimestamp};c&&(f.ReplayFlags=c);this._poster.post(this._protocol,this._host,"/rec/page",a.stringify(f),function(b){var c;try{c=a.parseJson(b)}catch(f){d.disableBecauseRecPageSaidSo();return}d.handleResponse(c);if(b=a._fs_ready())try{b()}catch(g){a.logIfDebug("exception in _fs_ready(): "+g)}for(b=0;b<c.Blocks.length;++b)try{a.BlockRule.isComment(c.Blocks[b].Selector)||d._blocker.addRule(c.Blocks[b])}catch(h){a.logIfDebug("Unexpected error parsing block rule. Skipping "+
c.Blocks[b])}d._queue.enqueueFirst(a.EVENT_SET_FRAME_BASE,[a.baseUri(d._doc),a.doctypeString(d._doc)]);d._queue.startPipeline(c.PageIntId);d.fullyStarted()},function(a){d.disableBecauseRecPageSaidSo()})};d.prototype.setIdsAndCookie=function(b){var d=this._identity;d.setIds(b.CookieDomain,b.UserIntId,b.SessionIntId);this._pageId=b.PageIntId;this._embedToken=b.EmbedToken;a.logIfDebug("/User,"+d.userId()+"/Session,"+d.sessionId()+"/Page,"+b.PageIntId)};d.prototype.injectIntegrationScript=function(){if(this._domLoaded&&
this._integrationScript){var b=this._doc.createElement("script");a._fs_csp()?b.src=this._protocol+this._host+"/rec/integrations?OrgId="+this._orgId:b.text=this._integrationScript;b.async=!0;this._doc.head.appendChild(b)}};d.prototype.handleResponse=function(b){this.setIdsAndCookie(b);this._integrationScript=b.IntegrationScript;this._getCurrentSessionEnabled=b.GetCurrentSessionEnabled?a.GetCurrentSessionEnabledState.Enabled:a.GetCurrentSessionEnabledState.Disabled;this.injectIntegrationScript()};d.prototype.disableBecauseRecPageSaidSo=
function(){this.shutdown();a.logIfDebug("Disabling FS.");var b=a._fs_ready();if(b)try{b(!0)}catch(d){a.logIfDebug("exception in _fs_ready(): "+d)}};return d}(a.Recorder);a.TopRecorder=f})(l||(l={}));(function(a){function h(b,d,c,e,f,h){return new a.PostMessageEventTransport(b)}a.makeFrameTransport=h;var f=function(b){function d(c,d,f,k,m,l,p,q,n){void 0===m&&(m=window);void 0===l&&(l=a.RealTicker);void 0===p&&(p=new a.PostMessagePoster);void 0===q&&(q=h);void 0===n&&(n=a.defaultInjector);b.call(this,
c,d,f,k,m,l,q,n);this._messagePoster=p}x(d,b);d.prototype.start=function(a){b.prototype.start.call(this,a);this.sendRequestForFrameId()};d.prototype.postMessageReceived=function(c,d){b.prototype.postMessageReceived.call(this,c,d);switch(d[0]){case a.FS_SET_FRAME_ID_CMD:try{this.setFrameIdFromOutside(d[1],d[2],d[3],d[4],d[5],d[6])}catch(f){a.logIfDebug("Failed to parse frameId from message"+d)}}};d.prototype.sendRequestForFrameId=function(){this._frameId||(0==this._frameId?a.logIfDebug("For some reason the outer window attempted to request a frameId"):
(a.logIfDebug("Asking for a frame ID from within frame: "+location.href),this._messagePoster.postMessage(this._wnd.parent,a.FS_REQUEST_FRAME_ID,null)))};d.prototype.setFrameIdFromOutside=function(b,d,f,h,m,l){if(b)if(this._frameId)a.logIfDebug("frame Id is already set to "+this._frameId+". Received second request to set it to "+b+" Iframe:"+location.href);else{a.logIfDebug("FrameId received within frame "+location.href+": "+b);this._identity.initFromParsedCookie(m);this._frameId=b;this._parentIds=
d;for(m=0;m<h.length;++m)this._blocker.addRule(h[m]);this._queue.enqueueFirst(a.EVENT_SET_FRAME_BASE,[a.baseUri(this._wnd.document),a.doctypeString(this._wnd.document)]);this._queue.rebaseIframe(f);this._ctx.setStartTime(f);this._pageId=l;this._queue.startPipeline(l,b,d);this.flushPendingChildFrameInits();this.fullyStarted()}else a.logIfDebug("Outer page gave us a bogus frame Id! Iframe: "+location.href)};return d}(a.Recorder);a.InnerRecorder=f})(l||(l={}));(function(a){function h(){return(new Date).getTime()}
function f(c){var d=t.getCurrentSessionEnabled();if(d==a.GetCurrentSessionEnabledState.NoInfoYet)return null;if(d==a.GetCurrentSessionEnabledState.Disabled)return w+"//"+t.identity().host()+"/opt/upgrade";d=b();if(!d)return null;c&&(d+=":"+h());return w+"//"+t.identity().host()+"/ui/"+t.identity().orgId()+"/session/"+encodeURIComponent(d)}function b(){var b=t.getCurrentSessionEnabled();return b!=a.GetCurrentSessionEnabledState.NoInfoYet&&b!=a.GetCurrentSessionEnabledState.Disabled&&t.identity().userId()?
t.identity().userId()+":"+t.identity().sessionId():null}function d(){t.console().enable()}function c(){t.console().disable()}function e(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];"log"!==a&&("info"!==a&&"warn"!==a&&"error"!==a&&"debug"!==a)&&(b.unshift(a),a="log");t.console().addLog(a,b)}function g(){t?(t.shutdown(),t=null):a.logIfDebug("Recording already shut down.")}function k(){t?a.logIfDebug("Recording already started."):n(!0)}function l(b,c){var d=t.vars();d?d.api(b,c):a.logIfDebug("Illegal attempt to set "+
b+" vars in an frame context: "+a.stringify(c))}function r(){return t.identity().cookies()}function p(a,b){return t.identity().setCookie(a,b)}function q(){a.initDebug();u=a._fs_host();y=a._fs_org();if(u)if(y){a.logIfDebug("host: "+u);a.logIfDebug("orgid: "+y);"localhost:8080"==u&&(w="http:");var b;v(y);window.MutationEvent&&window.postMessage?!x||a._fs_run_in_iframe()||a._fs_transport()?b=!0:(a.logIfDebug("Fullstory recording for this page is NOT allowed within an iFrame."),b=!1):(a.logIfDebug("missing required browser features"),
b=!1);b?(n(),s(),window.addEventListener("message",function(b){if("string"==typeof b.data)switch(a.parsePostMessageData(b.data)[0]){case a.FS_SHUTDOWN_FRAME:console.log("received shutdown",window);g();break;case a.FS_RESTART_FRAME:console.log("received restart",window),k()}})):z()}else a.logIfDebug("Missing global _fs_org. Recording disabled.");else a.logIfDebug("Missing global _fs_host. Recording disabled.")}function n(b){A=h();t=x?new a.InnerRecorder(C,u,w,y):new a.TopRecorder(C,u,w,y);t.start(function(){b&&
t.tellAllFramesTo([a.FS_RESTART_FRAME])});b&&(t.onDomLoad(),t.onLoad())}function v(b){var c=a._fs_transport();a._fs_is_outer_script()?x=!1:window!=top?x=!0:c?c.init&&c.init(b)&&(x=!0):x=!1}function z(){var b=document.documentElement,c=a._fs_replay_flags();a.logIfDebug("Unable to record playback stream.");var d=document.createElement("script");window.__fs_startResponse=function(a){t.identity().setIds(a.CookieDomain,a.UserIntId,a.SessionIntId);document.body.removeChild(d)};d.src="//"+t.identity().host()+
"/rec/page?OrgId="+t.identity().orgId()+"&UserId="+t.identity().userId()+"&Url="+encodeURIComponent(location.href)+"&Base="+encodeURIComponent(a.baseUri(document))+"&Width="+b.clientWidth+"&Height="+b.clientHeight+"&ScreenWidth="+window.screen.width+"&ScreenHeight="+window.screen.height+"&Referrer="+encodeURIComponent(document.referrer)+"&Doctype="+encodeURIComponent(a.doctypeString(document))+"&Fallback=true"+(c?"&ReplayFlags="+c:"");document.body.appendChild(d)}function s(){var a=function(){B||
(B=!0,t.onDomLoad())},b=!1;switch(document.readyState){case "interactive":document.attachEvent||a();break;case "complete":a(),b||(b=!0,t.onLoad())}B||document.addEventListener("DOMContentLoaded",function(b){a()});b||window.addEventListener("load",function(c){a();b||(b=!0,t.onLoad())})}var y,u,w="https:",x,B=!1,A=h(),t,D=!1,C={startTime:function(){return A},setStartTime:function(a){A=a},now:function(){return h()-A},wallTime:h,disableConsole:c,maybeAddInitialScroll:function(){!D&&(document.body&&a.fsid(document.body))&&
(t.eventWatcher().addWindowScroll(),D=!0)}};a.Setup=function(){if(!a.isLoaded()){var h=a.Namespace();a.setLoaded(h);window[h].getCurrentSessionURL=a.$entry(f);window[h].getCurrentSession=a.$entry(b);window[h].enableConsole=a.$entry(d);window[h].disableConsole=a.$entry(c);window[h].log=a.$entry(e);window[h].shutdown=a.$entry(g);window[h].restart=a.$entry(k);window[h]._api=a.$entry(l);window[h]._cookies=r;window[h]._setCookie=p;q()}};a.getCurrentSessionURL=f})(l||(l={}));try{l.Setup()}catch(u){l._fs_debug()&&
window.console&&console.log&&console.log("Failed to initialize FullStory.")}})();
